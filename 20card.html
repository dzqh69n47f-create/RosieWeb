<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¤¾äº¤å¤§å†’éšªï¼šçŠ€ç‰›èˆ‡å°è¥¿ç“œçš„æƒ…å¢ƒæŒ‘æˆ°</title>
    <!-- å¼•å…¥ React, ReactDOM èˆ‡ Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Lucide Core (æ¯” React ç‰ˆåœ¨ UMD ç’°å¢ƒæ›´ç©©å®š) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FFFDF9;
        }
        /* å¢åŠ å¹³æ»‘å‹•ç•« */
        .fade-enter { opacity: 0; transform: translateY(10px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: all 0.5s; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // å®‰å…¨çš„åœ–ç¤ºçµ„ä»¶ï¼šä½¿ç”¨ Lucide Core çš„æ¸²æŸ“æ–¹å¼
        const Icon = ({ name, className = "w-5 h-5", color = "currentColor" }) => {
            const iconRef = useRef(null);
            
            useEffect(() => {
                if (iconRef.current) {
                    // æ¸…ç©ºèˆŠå…§å®¹ä¸¦æ¸²æŸ“æ–°åœ–ç¤º
                    iconRef.current.innerHTML = '';
                    const iconSvg = lucide.icons[name];
                    if (iconSvg) {
                        const content = iconSvg[2] || '';
                        iconRef.current.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${color}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}">${content}</svg>`;
                    }
                }
            }, [name, className, color]);

            return <span ref={iconRef} className="inline-flex items-center justify-center"></span>;
        };

        const scenarios = [
          { id: 1, category: 'å£å£æ°£æ€ªç¸', icon: 'ğŸ—£ï¸', title: 'æ”¶æ±è¥¿å¤ªæ…¢', content: 'çŠ€ç‰›åœ¨æ”¶æ›¸åŒ…ï¼Œå°è¥¿ç“œå¤§å«ï¼šã€Œä½ å‹•ä½œå¾ˆæ…¢è€¶ï¼æ“‹åˆ°æˆ‘äº†å•¦ï¼ã€', prompt: 'å¦‚æœä½ æ˜¯çŠ€ç‰›ï¼Œè½åˆ°é€™ç¨®èªæ°£ï¼Œä½ å¿ƒè£¡æ˜¯ä»€éº¼æ„Ÿè¦ºï¼Ÿä½ å¯ä»¥æ€éº¼å›æ‡‰ï¼Ÿ' },
          { id: 2, category: 'å£å£æ°£æ€ªç¸', icon: 'ğŸ—£ï¸', title: 'æƒ³åŠ å…¥éŠæˆ²', content: 'çŠ€ç‰›æƒ³ç©çƒï¼Œå°è¥¿ç“œå‰è…°èªªï¼šã€Œæˆ‘å€‘äººæ»¿äº†ï¼Œä½ èµ°é–‹å•¦ï¼ã€', prompt: 'æ‹’çµ•åˆ¥äººæ™‚ï¼Œèªæ°£å¯ä»¥æ€éº¼èª¿æ•´æ‰ä¸æœƒè®“äººå—å‚·ï¼Ÿ' },
          { id: 3, category: 'å£å£æ°£æ€ªç¸', icon: 'ğŸ—£ï¸', title: 'å‘½ä»¤å¼èªªè©±', content: 'å°è¥¿ç“œæŒ‡è‘—åœ°ä¸Šçš„åƒåœ¾å°çŠ€ç‰›å¼ï¼šã€Œå–‚ï¼é‚£å€‹åƒåœ¾ä½ æ‹¿å»ä¸Ÿæ‰ï¼ã€', prompt: 'å°è¥¿ç“œæƒ³è¦çŠ€ç‰›å¹«å¿™ï¼Œæ‡‰è©²è¦æ€éº¼èªªæ‰å°ï¼Ÿ' },
          { id: 4, category: 'å£å£æ°£æ€ªç¸', icon: 'ğŸ—£ï¸', title: 'å«Œæ£„åˆ†çµ„', content: 'è€å¸«å®£å¸ƒåˆ†çµ„ï¼Œå°è¥¿ç“œå˜†æ°£èªªï¼šã€Œåšï¼ç‚ºä»€éº¼æˆ‘è¦è·ŸçŠ€ç‰›ä¸€çµ„ï¼ŒçœŸå€’æ¥£ã€‚ã€', prompt: 'åœ¨å¤§å®¶é¢å‰è¢«å«Œæ£„ï¼ŒçŠ€ç‰›å¿ƒè£¡çš„å°æ€ªç¸æœƒè·³å‡ºä¾†å—ï¼Ÿä»–è©²æ€éº¼è¾¦ï¼Ÿ' },
          { id: 5, category: 'å£å£æ°£æ€ªç¸', icon: 'ğŸ—£ï¸', title: 'å‚¬ä¿ƒè²', content: 'çŠ€ç‰›åœ¨å¯«å­—ï¼Œå°è¥¿ç“œåœ¨æ—é‚Šä¸€ç›´æ•²æ¡Œå­ï¼šã€Œå¿«é»å•¦ï¼ä½ æ€éº¼é‚„æ²’å¯«å®Œï¼ã€', prompt: 'ç•¶åˆ¥äººåœ¨å¿™çš„æ™‚å€™ï¼Œä¸€ç›´å‚¬ä¿ƒæœƒé€ æˆä»€éº¼å½±éŸ¿ï¼Ÿ' },
          { id: 6, category: 'å£å£æ°£æ€ªç¸', icon: 'ğŸ—£ï¸', title: 'å˜²ç¬‘å¤±èª¤', content: 'çŠ€ç‰›ä¸å°å¿ƒæŠŠæ°´å¼„ç¿»äº†ï¼Œå°è¥¿ç“œå¤§ç¬‘ï¼šã€Œå“ˆå“ˆï¼çŠ€ç‰›ä½ å¥½ç¬¨å–”ï¼ã€', prompt: 'ç•¶åˆ¥äººçŠ¯éŒ¯æ™‚ï¼Œå˜²ç¬‘æœƒè®“æƒ…æ³è®Šå¥½å—ï¼Ÿ' },
          { id: 7, category: 'æ„å¤–å°ç«èŠ±', icon: 'âœ¨', title: 'æ’éšŠç¢°æ’', content: 'æ’éšŠé ˜åˆé¤æ™‚ï¼Œå°è¥¿ç“œä¸å°å¿ƒæ’åˆ°çŠ€ç‰›çš„èƒŒï¼Œå»æ²’é“æ­‰å°±è·‘èµ°ã€‚', prompt: 'çŠ€ç‰›é€™æ™‚å€™æ‡‰è©²è¦ºå¾—å°è¥¿ç“œæ˜¯æ•…æ„çš„å—ï¼Ÿä»–è©²å»å•æ¸…æ¥šå—ï¼Ÿ' },
          { id: 8, category: 'æ„å¤–å°ç«èŠ±', icon: 'âœ¨', title: 'æ–‡å…·è¢«å¼„æ‰', content: 'å°è¥¿ç“œç¶“éæ¡Œå­ï¼ŒæŠŠçŠ€ç‰›çš„å½©è‰²ç­†æƒåˆ°åœ°ä¸Šï¼Œé‚„å¤§è²èªªï¼šã€Œèª°å«ä½ æ”¾æ¡Œé‚Šï¼ã€', prompt: 'é€™æ˜¯ä¸€å ´æ„å¤–é‚„æ˜¯æ•…æ„çš„ï¼Ÿå°è¥¿ç“œç‚ºä»€éº¼è¦å…ˆå¤§è²èªªè©±ï¼Ÿ' },
          { id: 9, category: 'æ„å¤–å°ç«èŠ±', icon: 'âœ¨', title: 'å–æ°´å™´åˆ°', content: 'å°è¥¿ç“œå–æ°´æ™‚ä¸å°å¿ƒå™´åˆ°çŠ€ç‰›çš„è¡£æœï¼Œé‚„ç¬‘å˜»å˜»åœ°çœ‹è‘—ä»–ã€‚', prompt: 'ã€Œç¬‘å˜»å˜»ã€çš„åæ‡‰å¯èƒ½æœƒè®“çŠ€ç‰›èª¤æœƒä»€éº¼ï¼Ÿ' },
          { id: 10, category: 'æ„å¤–å°ç«èŠ±', icon: 'âœ¨', title: 'ä½å­è¢«å', content: 'çŠ€ç‰›ä¸Šå®Œå»æ‰€å›ä¾†ï¼Œç™¼ç¾å°è¥¿ç“œååœ¨ä»–çš„ä½ç½®ä¸Šèªªï¼šã€Œé€™ç¾åœ¨æ˜¯æˆ‘çš„ä½å­äº†ï¼ã€', prompt: 'å¦‚æœå°è¥¿ç“œåªæ˜¯æƒ³é–‹ç©ç¬‘ï¼Œé€™å€‹ç©ç¬‘é©åˆå—ï¼Ÿ' },
          { id: 11, category: 'æ¡ŒéŠå¤§æŒ‘æˆ°', icon: 'ğŸ²', title: 'çš‡åè¢«æ¶', content: 'ç©ã€Šç¡çš‡åã€‹æ™‚ï¼Œå°è¥¿ç“œé€£çºŒå…©æ¬¡æ¶èµ°çŠ€ç‰›æœ€å–œæ­¡çš„ã€Œé¬†é¤…çš‡åã€ã€‚', prompt: 'ç©éŠæˆ²è¢«é‡å°æ™‚ï¼Œè¦å¦‚ä½•æ§åˆ¶æƒ³ç™¼ç«çš„æƒ…ç·’ï¼Ÿ' },
          { id: 12, category: 'æ¡ŒéŠå¤§æŒ‘æˆ°', icon: 'ğŸ²', title: 'é«˜å¡”å€’å¡Œ', content: 'ç–Šã€Šè¶…ç´šçŠ€ç‰›ã€‹æ™‚ï¼Œå°è¥¿ç“œæ‰‹æ™ƒäº†ä¸€ä¸‹è®“å¡”å€’æ‰ï¼Œå»æ€ªçŠ€ç‰›ï¼šã€Œæ˜¯ä½ å‰›æ‰å¼„æ­ªçš„ï¼ã€', prompt: 'æ¨å¸è²¬ä»»æœƒè®“ä»¥å¾Œé‚„æœ‰åŒå­¸æƒ³è·Ÿä½ ç©éŠæˆ²å—ï¼Ÿ' },
          { id: 13, category: 'æ¡ŒéŠå¤§æŒ‘æˆ°', icon: 'ğŸ²', title: 'æŠ½ä¸åˆ°å¥½ç‰Œ', content: 'çŠ€ç‰›é€£çºŒäº”å›åˆéƒ½æŠ½åˆ°æ•¸å­—ç‰Œï¼Œä¸€å¼µåœ‹ç‹éƒ½æ²’æœ‰ï¼Œå¿ƒè£¡å¥½æƒ³æ’•æ‰ç‰Œã€‚', prompt: 'é€™æ™‚å€™çŠ€ç‰›å¯ä»¥å°è‡ªå·±èªªä»€éº¼è©±ä¾†è½‰ç§»å¤±è½æ„Ÿï¼Ÿ' },
          { id: 14, category: 'æ¡ŒéŠå¤§æŒ‘æˆ°', icon: 'ğŸ²', title: 'è¢«æš«åœå›åˆ', content: 'å°è¥¿ç“œå°çŠ€ç‰›å‡ºäº†ä¸€å¼µã€Œç¡çœ å¡ã€ï¼Œå®³çŠ€ç‰›é€™ä¸€è¼ªä¸èƒ½å‹•ï¼Œåªèƒ½çœ‹åˆ¥äººç©ã€‚', prompt: 'é€™æ˜¯éŠæˆ²è¦å‰‡ã€‚çŠ€ç‰›é€™æ™‚å€™å¯ä»¥åšä»€éº¼ä¾†åº¦éç­‰å¾…çš„æ™‚é–“ï¼Ÿ' },
          { id: 15, category: 'æ¡ŒéŠå¤§æŒ‘æˆ°', icon: 'ğŸ²', title: 'è¢«èªªä½œå¼Š', content: 'çŠ€ç‰›ä¸å°å¿ƒå¤šæ‹¿ä¸€å¼µç‰Œï¼Œå°è¥¿ç“œæŒ‡è‘—ä»–å¤§å–Šï¼šã€Œè€å¸«ï¼çŠ€ç‰›ä½œå¼Šï¼ä»–å£å£ï¼ã€', prompt: 'ç™¼ç¾åˆ¥äººçŠ¯éŒ¯æ™‚ï¼Œé™¤äº†å¤§å–Šã€Œå‘Šç‹€ã€ï¼Œé‚„æœ‰æ›´å¥½çš„æºé€šæ–¹å¼å—ï¼Ÿ' },
          { id: 16, category: 'ç¤¾äº¤å°è¡çª', icon: 'ğŸ’¬', title: 'å€Ÿæ±è¥¿ä¸é‚„', content: 'å°è¥¿ç“œå€Ÿäº†çŠ€ç‰›çš„æ©¡çš®æ“¦ï¼Œçµæœå¼„ä¸Ÿäº†ï¼Œé‚„å›å˜´ï¼šã€Œä¸å°±ä¸€å€‹æ©¡çš®æ“¦ï¼Œå°æ°£é¬¼ï¼ã€', prompt: 'å¦‚æœä½ æ˜¯çŠ€ç‰›ï¼Œä½ æœƒæ€éº¼æè¡›è‡ªå·±çš„æ±è¥¿ï¼Œåˆä¸è·Ÿå°æ–¹åµæ¶ï¼Ÿ' },
          { id: 17, category: 'ç¤¾äº¤å°è¡çª', icon: 'ğŸ’¬', title: 'è¢«å–ç¶½è™Ÿ', content: 'å°è¥¿ç“œä¸€ç›´å«çŠ€ç‰›ä»–ä¸å–œæ­¡çš„é›£è½ç¶½è™Ÿï¼Œå…¨ç­éƒ½åœ¨çœ‹ã€‚', prompt: 'é€™æ™‚å€™çŠ€ç‰›æ‡‰è©²ï¼š1.ç½µå›å» 2.è£æ²’è½åˆ° 3.åš´è‚…å‘Šè¨´å°æ–¹æˆ‘ä¸å–œæ­¡ï¼Ÿ' },
          { id: 18, category: 'ç¤¾äº¤å°è¡çª', icon: 'ğŸ’¬', title: 'æ„è¦‹è¢«åå°', content: 'è¨è«–è¦å»å“ªè£¡ç©ï¼ŒçŠ€ç‰›æƒ³å»æ“å ´ï¼Œå°è¥¿ç“œå¤§è²åå°ï¼šã€Œèª°è¦å»æ“å ´ï¼Œç„¡èŠæ­»äº†ï¼ã€', prompt: 'å¤§å®¶æ„è¦‹ä¸åŒæ™‚ï¼Œå¦‚ä½•æœ‰ç¦®è²Œåœ°è¡¨é”åå°ï¼Ÿ' },
          { id: 19, category: 'ç¤¾äº¤å°è¡çª', icon: 'ğŸ’¬', title: 'è¢«å†¤æ‰äº†', content: 'è€å¸«å•èª°åœ¨è¬›è©±ï¼Œæ˜æ˜æ˜¯å°è¥¿ç“œï¼Œå°è¥¿ç“œå»æŒ‡è‘—çŠ€ç‰›èªªï¼šã€Œæ˜¯ä»–å…ˆè·Ÿæˆ‘èªªè©±çš„ï¼ã€', prompt: 'è¢«å†¤æ‰æ™‚ï¼ŒçŠ€ç‰›è©²å¦‚ä½•å†·éœå‘è€å¸«èªªæ˜æƒ…æ³ï¼Ÿ' },
          { id: 20, category: 'ç¤¾äº¤å°è¡çª', icon: 'ğŸ’¬', title: 'ç’°å¢ƒå¤ªåµ', content: 'æ•™å®¤è£¡å¤§å®¶éƒ½åœ¨åµæ¶ï¼ŒçŠ€ç‰›è¦ºå¾—è€³æœµå¥½ç—›ã€é ­å¥½äº‚ï¼Œå¥½æƒ³è¡å‡ºæ•™å®¤è·‘æ‰ã€‚', prompt: 'çŠ€ç‰›æ„Ÿè¦ºåˆ°æ„Ÿå®˜è¶…è¼‰äº†ï¼Œä»–å¯ä»¥æ€éº¼è·Ÿè€å¸«æ±‚åŠ©ï¼Ÿ' },
        ];

        const categories = [
          { name: 'å…¨éƒ¨', icon: 'Shuffle', color: 'bg-slate-500' },
          { name: 'å£å£æ°£æ€ªç¸', icon: 'MessageCircle', color: 'bg-rose-400' },
          { name: 'æ„å¤–å°ç«èŠ±', icon: 'AlertTriangle', color: 'bg-amber-400' },
          { name: 'æ¡ŒéŠå¤§æŒ‘æˆ°', icon: 'Sword', color: 'bg-emerald-400' },
          { name: 'ç¤¾äº¤å°è¡çª', icon: 'BookOpen', color: 'bg-indigo-400' },
        ];

        function App() {
          const [selectedCategory, setSelectedCategory] = useState('å…¨éƒ¨');
          const [currentScenario, setCurrentScenario] = useState(null);
          const [isDrawing, setIsDrawing] = useState(false);
          const [history, setHistory] = useState([]);

          const drawScenario = () => {
            setIsDrawing(true);
            const filteredScenarios = scenarios.filter(s => 
              selectedCategory === 'å…¨éƒ¨' || s.category === selectedCategory
            );

            let availableScenarios = filteredScenarios.filter(s => !history.includes(s.id));

            if (availableScenarios.length === 0) {
              availableScenarios = filteredScenarios.filter(s => s.id !== currentScenario?.id);
              if (availableScenarios.length === 0) availableScenarios = filteredScenarios;
            } else {
                availableScenarios = availableScenarios.filter(s => s.id !== currentScenario?.id);
                if (availableScenarios.length === 0) availableScenarios = [filteredScenarios.find(s => !history.includes(s.id)) || filteredScenarios[0]];
            }

            setTimeout(() => {
              const randomIndex = Math.floor(Math.random() * availableScenarios.length);
              const picked = availableScenarios[randomIndex];
              setCurrentScenario(picked);
              setHistory(prev => prev.includes(picked.id) ? prev : [...prev, picked.id]);
              setIsDrawing(false);
            }, 850);
          };

          const goBackToStart = () => setCurrentScenario(null);
          const resetGame = () => {
            setHistory([]);
            setCurrentScenario(null);
          };

          return (
            <div className="min-h-screen p-4 md:p-8 selection:bg-rose-100">
              <div className="max-w-5xl mx-auto">
                
                {/* é ‚éƒ¨ç·¨åˆ¶æ¨™ç¤º */}
                <div className="flex justify-center mb-4">
                  <span className="bg-rose-50 text-rose-500 px-4 py-1 rounded-full text-sm font-bold border border-rose-100 shadow-sm flex items-center gap-2">
                    <Icon name="Star" className="w-3 h-3" color="#f43f5e" /> é¡å¦‚è€å¸« ç·¨åˆ¶
                  </span>
                </div>

                {/* æ¨™é¡Œå€ */}
                <header className="text-center mb-10">
                  <h1 className="text-4xl md:text-5xl font-black text-[#2D3436] tracking-tight flex items-center justify-center gap-4">
                    <span>ğŸ¦</span> 
                    <span className="bg-clip-text text-transparent bg-gradient-to-r from-emerald-600 to-rose-500">
                      ç¤¾äº¤å¤§å†’éšª
                    </span>
                    <span>ğŸ‰</span>
                  </h1>
                  <p className="mt-3 text-slate-500 font-medium tracking-wide">çŠ€ç‰›èˆ‡å°è¥¿ç“œçš„æƒ…å¢ƒæŒ‘æˆ°ï¼šåœ¨äº’å‹•ä¸­ç·´ç¿’æƒ…ç·’è¡¨é”</p>
                </header>

                {/* åˆ†é¡é¸æ“‡å™¨ */}
                <div className="flex flex-wrap justify-center gap-3 mb-10">
                  {categories.map((cat) => (
                    <button
                      key={cat.name}
                      onClick={() => setSelectedCategory(cat.name)}
                      className={`flex items-center gap-2 px-5 py-2.5 rounded-2xl transition-all duration-300 border-b-4 ${
                        selectedCategory === cat.name
                          ? `${cat.color} text-white border-black/10 shadow-lg -translate-y-1`
                          : 'bg-white text-slate-500 border-slate-100 hover:border-slate-200 hover:bg-slate-50'
                      }`}
                    >
                      <Icon 
                        name={cat.icon} 
                        className="w-5 h-5" 
                        color={selectedCategory === cat.name ? "white" : "#94a3b8"} 
                      />
                      <span className="font-bold">{cat.name}</span>
                    </button>
                  ))}
                </div>

                {/* ä¸»è¦å…§å®¹å€ */}
                <div className="grid lg:grid-cols-12 gap-10 items-start">
                  
                  {/* å·¦å´ï¼šæŠ½ç‰Œå€ */}
                  <div className="lg:col-span-7 flex flex-col items-center">
                    <div 
                      className={`relative w-full aspect-[4/5] max-w-md rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.1)] transition-all duration-700 transform ${
                        isDrawing ? 'scale-95 rotate-2 opacity-80' : 'hover:scale-[1.01]'
                      } ${
                        currentScenario 
                          ? 'bg-white' 
                          : 'bg-gradient-to-br from-emerald-400 via-emerald-500 to-rose-400'
                      } border-[12px] border-white overflow-hidden`}
                    >
                      {isDrawing ? (
                        <div className="absolute inset-0 flex flex-col items-center justify-center text-white p-6 text-center">
                          <div className="w-16 h-16 border-[6px] border-white/30 border-t-white rounded-full animate-spin mb-6"></div>
                          <p className="text-2xl font-black tracking-widest">ç¿»é–‹æ–°æŒ‘æˆ°...</p>
                        </div>
                      ) : currentScenario ? (
                        <div className="p-10 h-full flex flex-col relative animate-in fade-in zoom-in duration-300">
                          <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-[15rem] opacity-[0.03] pointer-events-none select-none">
                            {currentScenario.icon}
                          </div>

                          <div className="flex items-center justify-between mb-8 relative z-10">
                            <span className="px-4 py-1.5 bg-rose-50 text-rose-500 text-xs font-black rounded-full uppercase tracking-wider border border-rose-100">
                              {currentScenario.category}
                            </span>
                            <span className="text-4xl drop-shadow-sm">{currentScenario.icon}</span>
                          </div>

                          <h3 className="text-3xl font-black text-slate-800 mb-8 leading-tight relative z-10">
                            {currentScenario.title}
                          </h3>
                          
                          <div className="flex-grow flex items-center justify-center bg-slate-50/50 rounded-[2rem] p-8 border-2 border-dashed border-slate-200 relative z-10">
                            <p className="text-xl md:text-2xl leading-relaxed text-slate-700 font-bold text-center">
                              ã€Œ{currentScenario.content}ã€
                            </p>
                          </div>

                          <div className="mt-8 flex justify-between items-center relative z-10">
                             <div className="text-slate-300 font-black text-sm italic tracking-widest uppercase">
                                {history.includes(currentScenario.id) && history.length > 0 ? 'å·²æŒ‘æˆ°é' : 'æ–°çš„æŒ‘æˆ°'}
                             </div>
                             <Icon 
                                name="CheckCircle2" 
                                className="w-8 h-8" 
                                color={history.includes(currentScenario.id) ? "#10b981" : "#e2e8f0"} 
                             />
                          </div>
                        </div>
                      ) : (
                        <div className="absolute inset-0 flex flex-col items-center justify-center text-white p-10 text-center">
                          <div className="w-24 h-24 bg-white/20 rounded-full flex items-center justify-center mb-8 backdrop-blur-sm">
                            <Icon name="Shuffle" className="w-12 h-12" color="white" />
                          </div>
                          <h2 className="text-3xl font-black mb-4 tracking-tight">æº–å‚™å¥½äº†å—ï¼Ÿ</h2>
                          <p className="opacity-80 font-medium max-w-[250px]">é¸æ“‡ä¸Šæ–¹é¡åˆ¥ï¼Œé»æ“ŠæŒ‰éˆ•æŠ½å–ä¸€å¼µæƒ…å¢ƒå¡</p>
                        </div>
                      )}
                    </div>

                    <div className="flex flex-col gap-4 w-full max-w-md mt-10">
                      <button
                        onClick={drawScenario}
                        disabled={isDrawing}
                        className="group relative flex items-center justify-center gap-3 px-8 py-5 font-black text-white transition-all duration-300 bg-rose-500 rounded-2xl focus:outline-none hover:bg-rose-600 shadow-[0_10px_20px_-5px_rgba(244,63,94,0.4)] hover:-translate-y-1 active:translate-y-0"
                      >
                        <Icon name="Shuffle" className={`w-6 h-6 ${isDrawing ? 'animate-spin' : ''}`} color="white" />
                        <span className="text-lg">
                          {isDrawing ? 'æŠ½å–ä¸­...' : (currentScenario ? 'ğŸ² å†æŠ½ä¸€å ´æŒ‘æˆ°' : 'ğŸ² é–‹å§‹æŠ½å–æŒ‘æˆ°')}
                        </span>
                      </button>
                      
                      {currentScenario && !isDrawing && (
                        <button
                          onClick={goBackToStart}
                          className="flex items-center justify-center gap-2 px-8 py-4 font-bold text-slate-400 transition-all duration-300 bg-transparent rounded-2xl hover:text-slate-600 hover:bg-slate-100"
                        >
                          <Icon name="ChevronLeft" className="w-5 h-5" color="currentColor" /> è¿”å›å°é¢
                        </button>
                      )}
                    </div>
                  </div>

                  {/* å³å´ï¼šè¨è«–å¼•å°å€ */}
                  <div className="lg:col-span-5 space-y-8">
                    <div className="bg-white rounded-[2rem] p-8 shadow-[0_10px_30px_rgba(0,0,0,0.05)] border border-slate-100 relative overflow-hidden">
                      <div className="absolute top-0 right-0 w-24 h-24 bg-indigo-50 rounded-bl-[4rem] -mr-8 -mt-8 opacity-50"></div>
                      
                      <h4 className="text-xl font-black text-indigo-600 flex items-center gap-2 mb-6 relative z-10">
                        <Icon name="MessageCircle" className="w-6 h-6" color="#4f46e5" /> å¼•å°å°è©±è™•
                      </h4>
                      
                      {currentScenario ? (
                        <div className="space-y-6 relative z-10 animate-in fade-in slide-in-from-bottom-4 duration-500">
                          <div className="p-6 bg-slate-50 rounded-2xl border-l-8 border-indigo-400">
                            <p className="text-slate-800 font-bold text-lg leading-relaxed">
                              {currentScenario.prompt}
                            </p>
                          </div>
                          
                          <div className="space-y-3">
                            <p className="text-sm font-black text-slate-400 uppercase tracking-widest">æ€è€ƒæŒ‡å—</p>
                            <div className="grid gap-3">
                              <div className="p-4 bg-rose-50/50 rounded-xl border border-rose-100 flex items-start gap-3">
                                <div className="w-6 h-6 bg-rose-400 rounded-full flex-shrink-0 flex items-center justify-center text-white text-[10px] font-bold">1</div>
                                <p className="text-sm font-bold text-rose-700">çŠ€ç‰›æ­¤æ™‚çš„å…§å¿ƒå°åŠ‡å ´æ˜¯ä»€éº¼ï¼Ÿ</p>
                              </div>
                              <div className="p-4 bg-emerald-50/50 rounded-xl border border-emerald-100 flex items-start gap-3">
                                <div className="w-6 h-6 bg-emerald-400 rounded-full flex-shrink-0 flex items-center justify-center text-white text-[10px] font-bold">2</div>
                                <p className="text-sm font-bold text-emerald-700">å°è¥¿ç“œå¦‚æœæ›ç¨®åšæ³•ï¼Œçµå±€æœƒä¸åŒå—ï¼Ÿ</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      ) : (
                        <div className="py-16 text-center text-slate-300 relative z-10">
                          <div className="mb-4 flex justify-center">
                            <Icon name="BookOpen" className="w-12 h-12" color="#e2e8f0" />
                          </div>
                          <p className="font-medium">è«‹æŠ½å–ä¸€å¼µæƒ…å¢ƒå¡<br/>å±•é–‹ä½ çš„è¨è«–å¤§å†’éšª</p>
                        </div>
                      )}
                    </div>

                    {/* è¶³è·¡ç´€éŒ„ */}
                    <div className="bg-white rounded-[2rem] p-8 shadow-[0_10px_30px_rgba(0,0,0,0.05)] border border-slate-100">
                      <div className="flex justify-between items-center mb-6">
                        <h4 className="text-lg font-black text-slate-700 flex items-center gap-2">
                          <Icon name="RotateCcw" className="w-5 h-5" color="#334155" /> å®Œæˆè¶³è·¡
                        </h4>
                        <button 
                          onClick={resetGame}
                          className="px-3 py-1 bg-slate-50 hover:bg-rose-50 hover:text-rose-500 rounded-lg text-[10px] font-black text-slate-400 transition-all uppercase tracking-widest"
                        >
                          é‡ç½®ç´€éŒ„
                        </button>
                      </div>
                      <div className="grid grid-cols-5 gap-2">
                        {Array.from({ length: 20 }).map((_, i) => (
                          <div 
                            key={i}
                            className={`aspect-square rounded-xl flex items-center justify-center text-xs font-black transition-all duration-500 ${
                              history.includes(i + 1)
                                ? 'bg-emerald-500 text-white shadow-md scale-105'
                                : 'bg-slate-50 text-slate-200 border border-slate-100'
                            }`}
                          >
                            {i + 1}
                          </div>
                        ))}
                      </div>
                      <div className="mt-6 flex items-center justify-between">
                        <div className="h-2 flex-grow bg-slate-100 rounded-full overflow-hidden mr-4">
                          <div 
                            className="h-full bg-emerald-500 transition-all duration-1000 shadow-[0_0_8px_rgba(16,185,129,0.5)]" 
                            style={{ width: `${(history.length / 20) * 100}%` }}
                          ></div>
                        </div>
                        <span className="text-sm font-black text-emerald-600">{history.length}/20</span>
                      </div>
                    </div>
                    
                    {/* SOS å°æ’‡æ­¥ */}
                    <div className="bg-[#2D3436] rounded-[2rem] p-8 text-white shadow-xl relative overflow-hidden group">
                      <div className="absolute -right-4 -bottom-4 text-white opacity-5 transform group-hover:scale-110 transition-transform duration-700">
                        <Icon name="Star" className="w-32 h-32" color="white" />
                      </div>
                      <h4 className="font-black text-rose-400 mb-4 flex items-center gap-2 tracking-wider uppercase">
                        ğŸ’¡ æ‡‰å°å°æ’‡æ­¥ (SOS)
                      </h4>
                      <ul className="space-y-4 relative z-10">
                        <li className="flex gap-4">
                          <div className="w-8 h-8 rounded-lg bg-rose-500 flex-shrink-0 flex items-center justify-center font-black text-white shadow-sm">S</div> 
                          <div><span className="font-black block text-sm">Stop åœä¸‹ä¾†</span><span className="text-xs text-slate-400">æ·±å‘¼å¸ä¸‰æ¬¡ï¼Œå†·éœæ€è€ƒå†é–‹å£ã€‚</span></div>
                        </li>
                        <li className="flex gap-4">
                          <div className="w-8 h-8 rounded-lg bg-amber-500 flex-shrink-0 flex items-center justify-center font-black text-white shadow-sm">O</div> 
                          <div><span className="font-black block text-sm">Observe è§€å¯Ÿ</span><span className="text-xs text-slate-400">çœ‹å°æ–¹çš„è¡¨æƒ…ï¼Œæƒ³ä¸€æƒ³ä»–åœ¨æƒ³ä»€éº¼ï¼Ÿ</span></div>
                        </li>
                        <li className="flex gap-4">
                          <div className="w-8 h-8 rounded-lg bg-emerald-500 flex-shrink-0 flex items-center justify-center font-black text-white shadow-sm">S</div> 
                          <div><span className="font-black block text-sm">Speak èªªæ„Ÿå—</span><span className="text-xs text-slate-400">ç”¨æœ‰ç¦®è²Œçš„æ–¹å¼èªªå‡ºä½ çš„å›°é›£ã€‚</span></div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>

                {/* é å°¾ */}
                <footer className="mt-20 pb-10 border-t border-slate-100 pt-10 text-center">
                  <div className="flex flex-col items-center gap-4">
                    <span className="bg-slate-100 text-slate-400 px-6 py-2 rounded-2xl text-xs font-black tracking-widest uppercase">
                      é¡å¦‚è€å¸« ç·¨åˆ¶
                    </span>
                    <p className="text-slate-400 text-xs leading-loose max-w-lg">
                      æœ¬æ•™æå°ˆç‚ºåœ‹ä¸­å°ç¤¾äº¤æŠ€å·§è¨“ç·´è¨­è¨ˆã€‚çŠ€ç‰›ä»£è¡¨æº«å’Œæ˜“æ„Ÿçš„å­©å­ï¼Œå°è¥¿ç“œä»£è¡¨ç›´æ¥è¡å‹•çš„å­©å­ã€‚<br/>
                      é€éè§’è‰²å°æ›è¨è«–ï¼Œå»ºç«‹åŒç†å¿ƒèˆ‡è¡çªè§£æ±ºèƒ½åŠ›ã€‚
                    </p>
                    <div className="flex gap-4 mt-2">
                      <div className="w-2 h-2 rounded-full bg-rose-400"></div>
                      <div className="w-2 h-2 rounded-full bg-emerald-400"></div>
                      <div className="w-2 h-2 rounded-full bg-indigo-400"></div>
                    </div>
                  </div>
                </footer>
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>