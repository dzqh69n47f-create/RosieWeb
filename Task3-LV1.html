<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lv.1 åˆå¿ƒè€…ä»»å‹™ï¼šæˆ‘çš„å¤±è½æ—¥è¨˜</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        /* è‡ªå®šç¾©å‹•ç•« */
        .fade-in-up { animation: fadeInUp 0.5s ease-out forwards; }
        .fade-in-right { animation: fadeInRight 0.5s ease-out forwards; }
        .zoom-in { animation: zoomIn 0.5s ease-out forwards; }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInRight {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="min-h-screen bg-amber-50 text-slate-800 flex items-center justify-center p-4">

    <!-- ä¸»å®¹å™¨ -->
    <div class="w-full max-w-2xl bg-white rounded-3xl shadow-2xl overflow-hidden border-4 border-amber-200 flex flex-col min-h-[600px] relative">
        
        <!-- é ‚éƒ¨å°è¦½åˆ— -->
        <div class="bg-amber-400 p-4 flex items-center justify-between shadow-md z-10 relative">
            <div class="flex items-center gap-2">
                <div class="bg-white p-2 rounded-full shadow-inner">
                   <span class="text-2xl">ğŸ®</span>
                </div>
                <div>
                    <h1 class="font-black text-amber-900 text-lg md:text-xl">Lv.1 åˆå¿ƒè€…ä»»å‹™</h1>
                    <p class="text-amber-800 text-xs font-bold opacity-80">æˆ‘çš„å¤±è½æ—¥è¨˜</p>
                </div>
            </div>
            <div id="step-indicator" class="bg-amber-900/10 px-3 py-1 rounded-full text-xs font-mono font-bold text-amber-900">
                STEP: 0/3
            </div>
        </div>

        <!-- å…§å®¹å€åŸŸ -->
        <div id="app-content" class="flex-1 p-6 md:p-8 flex flex-col relative overflow-hidden">
            <!-- å…§å®¹å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </div>

        <!-- èƒŒæ™¯è£é£¾ -->
        <div class="absolute top-20 right-0 w-64 h-64 bg-amber-100 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 opacity-50 pointer-events-none"></div>
        <div class="absolute bottom-0 left-0 w-48 h-48 bg-orange-100 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 opacity-50 pointer-events-none"></div>

    </div>

    <!-- JavaScript é‚è¼¯ -->
    <script>
        // --- 1. è³‡æ–™è¨­å®š ---
        const moods = [
            { id: 'balloon', text: 'æ¼æ°£çš„æ°£çƒï¼ˆæ²’åŠ›æ°£ï¼‰', icon: 'ğŸˆ', metaphor: 'å°±åƒä¸€é¡†æ¼æ°£çš„æ°£çƒï¼Œå…¨èº«è»Ÿè¶´è¶´çš„...' },
            { id: 'puppy', text: 'è¢«æ·‹æ¿•çš„å°ç‹—ï¼ˆå¾ˆå†·ã€å¾ˆå­¤å–®ï¼‰', icon: 'ğŸ¶', metaphor: 'å°±åƒä¸€éš»æ·‹æ¿•çš„å°ç‹—ï¼Œç™¼æŠ–åˆå­¤å–®...' },
            { id: 'well', text: 'æ‰é€²æ·±äº•è£¡ï¼ˆé»‘é»‘çš„ï¼‰', icon: 'ğŸ•³ï¸', metaphor: 'å¥½åƒæ‰é€²å¾ˆæ·±çš„äº•åº•ï¼Œå‘¨åœä¸€ç‰‡æ¼†é»‘...' },
            { id: 'other', text: 'å…¶ä»–', icon: 'ğŸ“', metaphor: '' }
        ];

        const tools = [
            { id: 'teacher', text: 'æ‰¾è€å¸«èŠå¤©', icon: 'ğŸ—£ï¸', action: 'å»æ‰¾ä¿¡ä»»çš„è€å¸«èŠèŠå¤©ï¼ŒæŠŠå¿ƒäº‹èªªå‡ºä¾†ã€‚' },
            { id: 'plushie', text: 'æŠ±è‘—æˆ‘çš„ç©å¶', icon: 'ğŸ§¸', action: 'ç·Šç·ŠæŠ±è‘—æˆ‘æœ€å–œæ­¡çš„ç©å¶ï¼Œæ„Ÿå—å®ƒçš„æº«æš–ã€‚' },
            { id: 'music', text: 'è½å–œæ­¡çš„éŸ³æ¨‚', icon: 'ğŸµ', action: 'æˆ´ä¸Šè€³æ©Ÿï¼Œæ’­æ”¾æˆ‘æœ€æ„›çš„é‚£å¹¾é¦–æ­Œï¼Œè®“æ—‹å¾‹é™ªä¼´æˆ‘ã€‚' },
            { id: 'other', text: 'å…¶ä»–', icon: 'âœ¨', action: '' }
        ];

        // --- 2. ç‹€æ…‹ç®¡ç† ---
        let state = {
            step: 'login', // login, mood, tools, result
            name: '',
            mood: '',
            customMood: '',
            tool: '',
            customTool: ''
        };

        // --- 3. åœ–ç¤º (SVG) ---
        const icons = {
            user: `<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-amber-600"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>`,
            chevronRight: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>`,
            search: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>`,
            shield: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>`,
            cloudRain: `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M16 14v6"/><path d="M8 14v6"/><path d="M12 16v6"/></svg>`,
            refresh: `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>`,
            save: `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>`
        };

        // --- 4. æ ¸å¿ƒé‚è¼¯ ---

        function updateState(key, value) {
            state[key] = value;
            render();
        }

        function setStep(newStep) {
            state.step = newStep;
            render();
        }

        function handleNext() {
            if (state.step === 'login' && state.name) setStep('mood');
            else if (state.step === 'mood' && (state.mood !== 'other' || state.customMood)) setStep('tools');
            else if (state.step === 'tools' && (state.tool !== 'other' || state.customTool)) setStep('result');
        }

        function getFinalText(type) {
            if (type === 'mood') {
                const selected = moods.find(m => m.id === state.mood);
                return state.mood === 'other' ? `è¦ºå¾—${state.customMood}` : selected.metaphor;
            }
            if (type === 'tool') {
                const selected = tools.find(t => t.id === state.tool);
                return state.tool === 'other' ? `è©¦è‘—${state.customTool}` : selected.action;
            }
        }

        // --- 5. ç•«é¢æ¸²æŸ“ (Render) ---
        function render() {
            const container = document.getElementById('app-content');
            const stepIndicator = document.getElementById('step-indicator');
            container.innerHTML = ''; // æ¸…ç©ºå…§å®¹

            // æ›´æ–°é ‚éƒ¨ STEP é¡¯ç¤º
            let stepText = '0/3';
            if (state.step === 'mood') stepText = '1/3';
            if (state.step === 'tools') stepText = '2/3';
            if (state.step === 'result') stepText = 'COMPLETE';
            stepIndicator.textContent = `STEP: ${stepText}`;

            // æ ¹æ“šæ­¥é©Ÿæ¸²æŸ“å…§å®¹
            if (state.step === 'login') renderLogin(container);
            else if (state.step === 'mood') renderMood(container);
            else if (state.step === 'tools') renderTools(container);
            else if (state.step === 'result') renderResult(container);
        }

        function renderLogin(container) {
            const div = document.createElement('div');
            div.className = 'flex-1 flex flex-col items-center justify-center text-center space-y-8 fade-in-up';
            div.innerHTML = `
                <div class="w-24 h-24 bg-amber-100 rounded-full flex items-center justify-center mb-4 border-4 border-amber-300">
                    ${icons.user}
                </div>
                <div class="space-y-2 max-w-md">
                    <h2 class="text-2xl font-bold text-slate-800">æ­¡è¿ä¾†åˆ°æ–°æ‰‹æ‘ï¼</h2>
                    <p class="text-slate-500">å°æ¨‚å‰›å¯«å®Œäº†å¥¹çš„æ—¥è¨˜ï¼Œç¾åœ¨æ›ä½ è©¦è©¦çœ‹ï¼<br/>è«‹è¼¸å…¥ä½ çš„ç©å®¶ä»£è™Ÿä¾†é–‹å§‹ä»»å‹™ã€‚</p>
                </div>
                <div class="w-full max-w-xs">
                    <label class="block text-left text-sm font-bold text-slate-400 mb-2 ml-1">ç©å®¶ ID (å§“å)</label>
                    <input type="text" id="input-name" placeholder="è«‹è¼¸å…¥åå­—..." value="${state.name}"
                        class="w-full px-6 py-4 rounded-xl bg-slate-50 border-2 border-slate-200 focus:border-amber-400 focus:ring-2 focus:ring-amber-200 outline-none transition-all text-lg font-bold text-center">
                </div>
                <button id="btn-start" ${!state.name ? 'disabled' : ''}
                    class="group relative px-8 py-4 bg-amber-500 hover:bg-amber-400 disabled:bg-slate-300 disabled:cursor-not-allowed rounded-2xl shadow-[0_4px_0_rgb(180,83,9)] hover:shadow-[0_2px_0_rgb(180,83,9)] active:shadow-none active:translate-y-1 transition-all">
                    <span class="flex items-center gap-2 font-black text-white text-lg">
                        é–‹å§‹ä»»å‹™ ${icons.chevronRight}
                    </span>
                </button>
            `;
            
            container.appendChild(div);

            // ç¶å®šäº‹ä»¶
            document.getElementById('input-name').addEventListener('input', (e) => {
                state.name = e.target.value;
                document.getElementById('btn-start').disabled = !state.name;
            });
            document.getElementById('btn-start').addEventListener('click', handleNext);
        }

        function renderMood(container) {
            const div = document.createElement('div');
            div.className = 'flex-1 flex flex-col fade-in-right h-full';
            
            // æ¨™é¡Œå€
            let html = `
                <div class="mb-6 flex items-center gap-3">
                    <div class="bg-blue-100 p-3 rounded-xl text-blue-600">${icons.search}</div>
                    <div>
                        <h2 class="text-xl font-bold text-slate-800">1. æƒæå¿ƒæƒ…ç‹€æ…‹</h2>
                        <p class="text-slate-500 text-sm">ç•¶æˆ‘æ„Ÿåˆ°ã€Œå¤±è½ã€çš„æ™‚å€™ï¼Œæˆ‘è¦ºå¾—æˆ‘å°±åƒä¸€é¡†...</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 gap-4 flex-1 overflow-y-auto no-scrollbar pb-4">
            `;

            // é¸é …å€
            moods.forEach(opt => {
                const isSelected = state.mood === opt.id;
                const borderClass = isSelected ? 'border-blue-500 bg-blue-50 shadow-md ring-2 ring-blue-200' : 'border-slate-200 hover:border-blue-300 hover:bg-slate-50';
                const textClass = isSelected ? 'text-blue-700' : 'text-slate-700';
                
                const [mainText, subText] = opt.text.includes('ï¼ˆ') ? opt.text.split('ï¼ˆ') : [opt.text, ''];

                html += `
                    <button onclick="updateState('mood', '${opt.id}')"
                        class="relative p-4 rounded-xl border-2 text-left transition-all flex items-center gap-4 group ${borderClass}">
                        <span class="text-3xl filter drop-shadow-sm group-hover:scale-110 transition-transform">${opt.icon}</span>
                        <div class="flex-1">
                            <span class="font-bold text-lg ${textClass}">${mainText}</span>
                            ${subText ? `<span class="text-sm text-slate-400 ml-2">(${subText.replace('ï¼‰', '')})</span>` : ''}
                        </div>
                        ${isSelected ? '<div class="absolute right-4 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-white">âœ“</div>' : ''}
                    </button>
                `;
            });

            // å…¶ä»–è¼¸å…¥æ¡†
            if (state.mood === 'other') {
                html += `
                    <div class="fade-in-up">
                        <input type="text" id="input-custom-mood" placeholder="è«‹æè¿°ä½ çš„æ„Ÿè¦º..." value="${state.customMood}"
                        class="w-full p-4 rounded-xl border-2 border-blue-400 bg-white focus:outline-none focus:ring-4 focus:ring-blue-100">
                    </div>
                `;
            }

            html += `</div>`; // End grid

            // ä¸‹ä¸€æ­¥æŒ‰éˆ•
            const disabled = !state.mood || (state.mood === 'other' && !state.customMood);
            html += `
                <div class="mt-6 flex justify-end">
                    <button id="btn-next-mood" ${disabled ? 'disabled' : ''}
                        class="px-8 py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95">
                        ç¢ºèªæƒæï¼Œä¸‹ä¸€æ­¥
                    </button>
                </div>
            `;

            div.innerHTML = html;
            container.appendChild(div);

            // ç¶å®šäº‹ä»¶
            if (document.getElementById('input-custom-mood')) {
                const input = document.getElementById('input-custom-mood');
                input.focus();
                input.addEventListener('input', (e) => {
                    state.customMood = e.target.value;
                    document.getElementById('btn-next-mood').disabled = !state.customMood;
                });
            }
            document.getElementById('btn-next-mood').addEventListener('click', handleNext);
        }

        function renderTools(container) {
            const div = document.createElement('div');
            div.className = 'flex-1 flex flex-col fade-in-right h-full';
            
            let html = `
                <div class="mb-6 flex items-center gap-3">
                    <div class="bg-green-100 p-3 rounded-xl text-green-600">${icons.shield}</div>
                    <div>
                        <h2 class="text-xl font-bold text-slate-800">2. é¸æ“‡é˜²ç¦¦é“å…·</h2>
                        <p class="text-slate-500 text-sm">é€™æ™‚å€™ï¼Œæˆ‘å¯ä»¥è©¦è‘—...</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 flex-1 overflow-y-auto no-scrollbar pb-4">
            `;

            tools.forEach(opt => {
                const isSelected = state.tool === opt.id;
                const borderClass = isSelected ? 'border-green-500 bg-green-50 shadow-md ring-2 ring-green-200 scale-[1.02]' : 'border-slate-200 hover:border-green-300 hover:bg-slate-50';
                const textClass = isSelected ? 'text-green-700' : 'text-slate-700';

                html += `
                    <button onclick="updateState('tool', '${opt.id}')"
                        class="p-4 rounded-xl border-2 text-left transition-all flex flex-col items-center justify-center gap-3 text-center h-full min-h-[140px] ${borderClass}">
                        <span class="text-4xl filter drop-shadow-sm mb-1">${opt.icon}</span>
                        <span class="font-bold text-lg ${textClass}">${opt.text}</span>
                        ${isSelected ? '<span class="text-green-600 text-xs font-bold">å·²è£å‚™æ­¤é“å…·</span>' : ''}
                    </button>
                `;
            });

            html += `</div>`; // End grid

            if (state.tool === 'other') {
                html += `
                    <div class="mt-4 fade-in-up">
                        <input type="text" id="input-custom-tool" placeholder="ä½ æœƒæƒ³åšä»€éº¼ä¾†è®“è‡ªå·±å¥½ä¸€é»ï¼Ÿ" value="${state.customTool}"
                        class="w-full p-4 rounded-xl border-2 border-green-400 bg-white focus:outline-none focus:ring-4 focus:ring-green-100">
                    </div>
                `;
            }

            const disabled = !state.tool || (state.tool === 'other' && !state.customTool);
            html += `
                <div class="mt-6 flex justify-end">
                    <button id="btn-next-tool" ${disabled ? 'disabled' : ''}
                        class="px-8 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all active:scale-95">
                        å®Œæˆè£å‚™ï¼Œçœ‹çµæœ
                    </button>
                </div>
            `;

            div.innerHTML = html;
            container.appendChild(div);

             // ç¶å®šäº‹ä»¶
             if (document.getElementById('input-custom-tool')) {
                const input = document.getElementById('input-custom-tool');
                input.focus();
                input.addEventListener('input', (e) => {
                    state.customTool = e.target.value;
                    document.getElementById('btn-next-tool').disabled = !state.customTool;
                });
            }
            document.getElementById('btn-next-tool').addEventListener('click', handleNext);
        }

        function renderResult(container) {
            const div = document.createElement('div');
            div.className = 'flex-1 flex flex-col zoom-in h-full';

            div.innerHTML = `
                <div class="text-center mb-6">
                    <div class="inline-block bg-yellow-100 text-yellow-700 px-4 py-1 rounded-full text-sm font-bold mb-2">
                        ğŸ‰ ä»»å‹™å®Œæˆï¼
                    </div>
                    <h2 class="text-2xl font-black text-slate-800">
                        ${state.name} çš„å¤±è½æ—¥è¨˜
                    </h2>
                </div>

                <div class="flex-1 bg-white border-2 border-slate-100 rounded-2xl p-6 shadow-[inset_0_2px_4px_rgba(0,0,0,0.05)] relative overflow-hidden overflow-y-auto custom-scrollbar">
                    <div class="absolute top-0 left-8 w-px h-full bg-red-200/50 hidden md:block"></div>
                    
                    <div class="relative z-10 space-y-6 font-medium text-slate-700 leading-relaxed text-lg">
                        <p class="flex items-center gap-2 text-slate-400 text-sm border-b border-slate-100 pb-2">
                            <span class="w-24">æ—¥æœŸï¼šä»Šå¤©</span>
                            <span>å¤©æ°£ï¼š${icons.cloudRain}</span>
                        </p>

                        <p>ä»Šå¤©ï¼Œæˆ‘çš„å¿ƒè£¡å¥½åƒä¸‹äº†ä¸€å ´é›¨ã€‚</p>
                        
                        <div class="bg-blue-50 p-4 rounded-r-xl border-l-4 border-blue-400">
                            <p>ç•¶æˆ‘æ„Ÿåˆ°å¤±è½çš„æ™‚å€™ï¼Œ</p>
                            <p class="text-blue-800 font-bold text-xl mt-1">${getFinalText('mood')}</p>
                        </div>

                        <p>é€™ç¨®æ„Ÿè¦ºçœŸçš„ä¸å¤ªèˆ’æœï¼Œä½†æˆ‘çŸ¥é“é›¨ç¸½æœƒåœçš„ã€‚</p>

                        <div class="bg-green-50 p-4 rounded-r-xl border-l-4 border-green-400">
                            <p>ç‚ºäº†ç…§é¡§æˆ‘è‡ªå·±ï¼Œæˆ‘æ±ºå®š...</p>
                            <p class="text-green-800 font-bold text-xl mt-1">${getFinalText('tool')}</p>
                        </div>
                        
                        <p class="text-right text-sm text-slate-400 mt-8">
                            â€”â€” ç­‰å¾…å¿ƒè£¡çš„é›¨åœä¸‹ä¾†ã€‚
                        </p>
                    </div>
                </div>

                <div class="mt-6 flex justify-between gap-4">
                    <button onclick="resetGame()"
                        class="px-6 py-3 text-slate-500 font-bold hover:bg-slate-100 rounded-xl transition-colors flex items-center gap-2">
                        ${icons.refresh} é‡ç©ä¸€æ¬¡
                    </button>
                    <button onclick="window.print()"
                        class="flex-1 px-6 py-3 bg-amber-500 hover:bg-amber-400 text-white font-bold rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2">
                        ${icons.save} å„²å­˜ / åˆ—å°æ—¥è¨˜
                    </button>
                </div>
            `;
            container.appendChild(div);
        }

        function resetGame() {
            state = {
                step: 'login',
                name: '',
                mood: '',
                customMood: '',
                tool: '',
                customTool: ''
            };
            render();
        }

        // --- 6. åˆå§‹åŒ– ---
        render();

    </script>
</body>
</html>
